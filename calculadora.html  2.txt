Nueva herramienta 

<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora de Precio y Cotización</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 500px; margin: auto; background-color: #f9f9f9; }
    h2, h3 { text-align: center; }
    input { width: 100%; padding: 10px; margin: 5px 0; box-sizing: border-box; border-radius: 5px; border: 1px solid #ccc; }
    button { padding: 12px 20px; margin-top: 10px; cursor: pointer; border-radius: 5px; border: none; color: white; }
    .calc-btn { background-color: #007BFF; width: 100%; }
    .copiar, .pdf { background-color: #28A745; margin-top: 5px; width: 48%; display: inline-block; }
    .trabajos { margin-top: 20px; border-top: 1px solid #ccc; padding-top: 10px; }
    .trabajo-item { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; border-radius: 5px; background-color: white; }
</style>
</head>
<body>

<h2>Calculadora de Precio y Cotización</h2>

<label>Área (m²):</label>
<input type="number" id="area" placeholder="Ej: 30">

<label>Costo materiales ($):</label>
<input type="number" id="materiales" placeholder="Ej: 150">

<label>Horas de mano de obra:</label>
<input type="number" id="horas" placeholder="Ej: 5">

<label>Valor por hora ($):</label>
<input type="number" id="valorHora" placeholder="Ej: 20">

<label>Otros costos ($):</label>
<input type="number" id="otros" placeholder="Ej: 20">

<label>Margen de ganancia (%):</label>
<input type="number" id="margen" placeholder="Ej: 25">

<button class="calc-btn" onclick="calcularPrecio()">Calcular Precio Final</button>

<h3 id="resultado"></h3>

<div class="trabajos">
<h3>Trabajos guardados:</h3>
<div id="listaTrabajos"></div>
</div>

<script>
let trabajos = [];

function calcularPrecio() {
    let area = parseFloat(document.getElementById('area').value);
    let materiales = parseFloat(document.getElementById('materiales').value);
    let horas = parseFloat(document.getElementById('horas').value);
    let valorHora = parseFloat(document.getElementById('valorHora').value);
    let otros = parseFloat(document.getElementById('otros').value);
    let margen = parseFloat(document.getElementById('margen').value) / 100;

    if(isNaN(area) || isNaN(materiales) || isNaN(horas) || isNaN(valorHora) || isNaN(otros) || isNaN(margen)){
        alert("Por favor, completa todos los campos correctamente.");
        return;
    }

    let costoManoObra = horas * valorHora;
    let costoTotal = materiales + costoManoObra + otros;
    let precioFinal = costoTotal / (1 - margen);
    let costoPorM2 = costoTotal / area;

    document.getElementById('resultado').innerHTML = `Precio final: $${precioFinal.toFixed(2)}<br>Costo por m²: $${costoPorM2.toFixed(2)}`;

    let trabajo = { area, materiales, horas, valorHora, otros, margen: margen*100, precioFinal: precioFinal.toFixed(2), costoPorM2: costoPorM2.toFixed(2) };
    trabajos.push(trabajo);
    actualizarLista();
}

function actualizarLista() {
    let lista = document.getElementById('listaTrabajos');
    lista.innerHTML = '';
    trabajos.forEach((t, index) => {
        let div = document.createElement('div');
        div.className = 'trabajo-item';
        div.innerHTML = `
            <b>Trabajo ${index+1}</b><br>
            Área: ${t.area} m²<br>
            Precio final: $${t.precioFinal}<br>
            Costo por m²: $${t.costoPorM2}<br>
            <button class="copiar" onclick="copiar(${index})">Copiar</button>
            <button class="pdf" onclick="generarPDF(${index})">Generar PDF</button>
        `;
        lista.appendChild(div);
    });
}

function copiar(index){
    let t = trabajos[index];
    let texto = `Trabajo ${index+1}\nÁrea: ${t.area} m²\nPrecio final: $${t.precioFinal}\nCosto por m²: $${t.costoPorM2}`;
    navigator.clipboard.writeText(texto).then(() => alert("Trabajo copiado al portapapeles."));
}

function generarPDF(index){
    const { jsPDF } = window.jspdf;
    let t = trabajos[index];
    const doc = new jsPDF();
    doc.setFontSize(18);
    doc.text("Cotización de Trabajo", 105, 20, { align: "center" });
    doc.setFontSize(12);
    doc.text(`Trabajo ${index+1}`, 20, 40);
    doc.text(`Área: ${t.area} m²`, 20, 50);
    doc.text(`Costo materiales: $${t.materiales}`, 20, 60);
    doc.text(`Mano de obra: ${t.horas}h × $${t.valorHora}/h = $${(t.horas*t.valorHora).toFixed(2)}`, 20, 70);
    doc.text(`Otros costos: $${t.otros}`, 20, 80);
    doc.text(`Margen de ganancia: ${t.margen}%`, 20, 90);
    doc.text(`Precio final: $${t.precioFinal}`, 20, 100);
    doc.text(`Costo por m²: $${t.costoPorM2}`, 20, 110);
    doc.save(`Cotizacion_Trabajo${index+1}.pdf`);
}
</script>

</body>
</html>
